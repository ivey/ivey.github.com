<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>gweezlebur</title>
    <link href="/stylesheets/styles.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flickr" href="http://api.flickr.com/services/feeds/photos_public.gne?id=90358277@N00&tags=forblog&lang=en-us&format=rss_200" />
    <link rel="alternate" type="application/rss+xml" title="Twitter" href="http://twitter.com/statuses/user_timeline/10967.rss" />
    <link rel="alternate" type="application/rss+xml" title="del.icio.us" href="http://del.icio.us/rss/ivey" />
    <link rel="alternate" type="application/rss+xml" title="Blog" href="http://gweezlebur.com/feed/atom.xml" />
    <link rel="alternate" type="application/rss+xml" title="Reader" href="http://www.google.com/reader/public/atom/user/13346909044841845374/state/com.google/broadcast" />
    <link rel="shortcut icon" type="image/x-icon" href="http://www.kevinmarsh.com/favicon.ico" />
    <link rel="openid.server" href="https://pip.verisignlabs.com/server" />
    <link rel="openid.delegate" href="http://ivey.pip.verisignlabs.com/" />
    <meta name="keywords" content="michael ivey, michael d. ivey, gweezlebur, blog, weblog, bay minette, ruby, merb, rails, ruby on rails, kg4qdh" />
    <meta name="description" content="Homepage of Michael D. Ivey, long time web hacker from Bay Minette, Alabama" />
</head>
<body>
  <div id="container">
    <div id="header">
      <h1><a href="/">gweezlebur<span class="large-dot">.</span>com</a></h1>
      <h2>Michael Ivey, blogging since '99</h2>
    </div>
    <ul id="feeds">
      <li class="feed blog"><a href="http://gweezlebur.com">Blog</a></li>
      <li class="feed twitter"><a href="http://twitter/ivey">Twitter</a></li>
      <li class="feed flickr"><a href="http://flickr.com/photos/ivey">Flickr</a></li>
      <li class="feed delicious"><a href="http://del.icio.us/ivey">del.icio.us</a></li>
      <li class="feed reader"><a href="http://www.google.com/reader/shared/13346909044841845374">Reader</a></li>
    </ul>
    <div id="archives">
      <h2>Blog Archives</h2>
      <ul>
      <li><a href="/2008/6/">June 2008</a> (43)</li>
      <li><a href="/2008/5/">May 2008</a> (30)</li>
      <li><a href="/2008/4/">April 2008</a> (1)</li>
      <li><a href="/2008/3/">March 2008</a> (1)</li>
      <li><a href="/2008/2/">February 2008</a> (7)</li>
      <li><a href="/2008/1/">January 2008</a> (6)</li>
      </ul>
      <p>Older posts coming eventually.</p>
    </div>
    <div id="content">
            <div class="post blog">
        <h1><a href="/2008/2/14/contributing-to-merb-part-1-">Contributing to Merb (Part 1)</a></h1>
        <p>I’ve seen several people ask “How can I help with merb-core?” and so, here’s a little guide. (Updated 2/14 w/ notes on rebasing.  Thanks ReinH.)</p>


  <p>This is part 1 of 2, for people who don’t want to run their own public fork.</p>


  <h3>Step 1: Get a Lighthouse account</h3>


  <p>All of the Merb development is moving to Lighthouse instead of Trac, so you’re going to need an account.  <a href='http://merb.lighthouseapp.com/users/new'>Go register</a> and then come back here.</p>


  <h3>Step 2: Get git</h3>


  <p>Merb is using <a href='http://git.or.cz/'>git</a> for development now.  <a href='http://git.or.cz/#download'>There’s information on the main git site</a> about downloading and installing.  There’s also some guides for installing on Mac.  Google is your friend.</p>


  <p>You should also configure git with your email address:</p>


<pre><code>
git config --global user.name "Mike Tester" 
git config --global user.email "mtester@gweezlebur.com" 
</code></pre>

  <p>These are global config settings that will apply to every project you checkout.</p>


  <h3>Step 3: Get Merb</h3>


  <p>Using git is different from using <span class='caps'>SVN</span>.  Every repository, whether published or not, is on equal footing with every other one.  All of the official Merb releases will be coming out of <a href='http://github.com/wycats/merb-core/tree/master'>wycats’ repository</a>, though, so you probably want to get that one.  Do that with “git clone”</p>


<pre><code>
$ git clone git://github.com/wycats/merb-core.git
Initialized empty Git repository in /tmp/merb-core/.git/
remote: Generating pack...
remote: Done counting 1684 objects.
remote: Deltifying 1684 objects...
remote:  100% (1684/1684) done
Indexing 1684 objects...
remote: Total 1684 (delta 800), reused 57 (delta 8)
 100% (1684/1684) done
Resolving 800 deltas...
 100% (800/800) done
</code></pre>

  <p>This will create a new repository in the directory merb-core, set up the remote repository links, fetch the latest copy of the upstream repository into your repository. and set up a tracking branch for upstream.</p>


  <h3>Step 4: Fix something</h3>


  <p>This is the whole point, right?  There’s a bug you’re dying to fix, or a feature you’re dying to add.  So let’s do that.  First, we create what git users calls a “topic branch” to hold the changes for this particular bug</p>


<pre><code>
$ git checkout -b my_bugfix 
Switched to a new branch "my_bugfix" 
</code></pre>

  <p>This creates the branch, and switches us to it.  Now change whatever needs changing, of course running the specs to make sure they still pass.</p>


  <p>There’s a lot of git commands you may use here that are beyond the scope of this guide, like diff and status.  Consult your favorite git tutorial.</p>


  <p>Now we need to commit the changes.  Remember, in git every repository is equal, so you’re committing to your local repo, not trying to commit to wycats’.</p>


<pre><code>
$ git commit -a -v
</code></pre>

  <p>This will pop open an editor for us to type a commit message.  It should have a short, very descriptive first line, a blank line, then any other information that’s relevant.</p>


<blockquote><pre>
Added bug zapper library

This loads in the bugzapper library,
which removes some common bugs,
like the ones in ticket #343.
</pre></blockquote>

  <p>Save and quit, and you’ll see something like this:</p>


<pre><code>
Created commit 14626c1: Added bug zapper library
 1 files changed, 2 insertions(+), 1 deletions(-)
</code></pre>

  <p>The important bit is “14626c1” ... it’s the first part of the unique identifier for this commit.  If you ever need to refer to this exact commit, you’ll need that.</p>


  <p>However, since we used a topic branch, we know that every commit on this branch is part of the intended changes.  So we can use a shorthand to actually generate our patch(es).  First, though, let’s make sure we’re current with upstream</p>


<pre><code>
$ git checkout master
$ git pull
$ git checkout my_bugfix
$ git rebase master
$ git format-patch master..
0001-Added-bug-zapper-library.patch
0002-initialize-zapper.patch
</code></pre>

  <p>This says “make patch files for every commit that is in this branch and not in master” (master is the default branch you started with).  You can see that I committed another fix, so there are 2 patches.</p>


  <p>If the rebase fails, it means your patches don’t apply cleanly with the latest upstream changes.  You’ll have to fix that (either manually or using git merge-tool), and then</p>


<pre><code>
$ git rebase --continue
</code></pre>

  <p>After that, continue with formatting the patch.</p>


  <h3>Step 5: Submit the patche(es)</h3>


  <p>Go to Lighthouse.  Create a ticket.  Tag it with “patch”.  Attach your patch(es).  Wait for them to be applied.</p>


  <h3>Step 6: Cleanup</h3>


  <p>You should switch back to the master branch now.</p>


<pre><code>
$ git checkout master
Switched to branch "master" 
</code></pre>

  <p>If your patches have been accepted, you can delete your branch, too:</p>


<pre><code>
$ git branch -D my_bugfix
Deleted branch my_bugfix.
</code></pre>

  <p>Branches are cheap, so you can leave it around for a while, if you think you might come back to it.</p>


  <p>You should also pull down the latest changes, so your next patch will apply cleanly:</p>


<pre><code>
$ git pull
</code></pre>
      </div>
    </div>
    <div id="footer">
      <a href="http://creativecommons.org/licenses/by-sa/1.0/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights" /></a> 
      Copyright &copy; 1999-2008 Michael Ivey unless otherwise stated.
      Unless otherwise noted, all content is licensed under a <a href="http://creativecommons.org/licenses/by-sa/1.0/">Creative Commons License</a>.
      Powered by a hacked-up copy of the very cool
      <a href="http://rubyforge.org/projects/tumblr/">tumblr</a>.
    </div>
  </div>
</body>
</html>
